{% extends '@BlueDayTemplate/Layout/_layout.html.twig' %}


{% block content %}

    {% if cart.totalItemNumber > 0 %}
            <h1 class="checkout-title">{{ 'template.BlueDay_bundle.cart.view.title'|trans }}</h1>
            <p class="checkout-actions checkout-actions-top">
                {% include "@BlueDayTemplate/Modules/_checkout-progress.html.twig" with {"step": "1"} %}
                <a class="button button-secondary desktop" href="{{ url('store_checkout_address') }}">{{ 'template.BlueDay_bundle.cart.view.checkout'|trans }} &nbsp;<i class="icon-arrow-right"></i> </a>
            </p>
        {{ form_start(form) }}
            <div class="cart-list">
                {% for line in form.cartLines %}
                    {% include "@BlueDayTemplate/Modules/_cart-item.html.twig" with { "line": line } %}
                {% endfor %}
            </div>
            <div class="coupon-list">
                {% for cartCoupon in cartCoupons %}
                    {% include "@BlueDayTemplate/Modules/_coupon-item.html.twig" with { "coupon": cartCoupon.coupon } %}
                {% endfor %}
            </div>
            <div class="shipping-list">
                {% include "@BlueDayTemplate/Modules/_shipping-item.html.twig" with {
                    "shippingRange": cart.shippingRange,
                    "shippingAmount": cart.shippingAmount
                } %}
            </div>
            <p class="cart-total"><span>{{ 'template.BlueDay_bundle.cart.view.total'|trans }} </span>{{ cart.amount|print_convert_money() }}</p>

            <div class="cart-actions">
                <a class="button button-secondary" href="{{ url('store_checkout_address') }}">{{ 'template.BlueDay_bundle.cart.view.checkout'|trans }} &nbsp;<i class="icon-arrow-right"></i> </a>
                {{
                    form_widget(form.update, {
                        label: 'template.BlueDay_bundle.cart.view.update_basket',
                        attr: {
                            class: 'button button-empty icon-refresh'
                        }
                    })
                }}
                <a class="button button-empty" href="{{ url('store_cart_empty') }}"><i class="icon-trash-o"></i> {{ 'template.BlueDay_bundle.cart.view.empty_basket'|trans }}</a>
                <a class="button button-empty cart-actions-continue" href="{{ url('store_homepage') }}"><i class="icon-arrow-left"></i> {{ 'template.BlueDay_bundle.cart.view.continue_shopping'|trans }}</a>
            </div>
        {{ form_end(form) }}

        {% render url('store_coupon_view') %}

        <!-- Related products -->

    {% else %}
        <div class="empty-page">
            <i class="icon-shopping-cart icon-3x"></i>
            <h2 class="product-title">{{ "template.BlueDay_bundle.cart.view.your_cart_is_empty"|trans}}</h2>
            <a class="button button-secondary" href="{{ url('store_homepage') }}">{{ 'template.BlueDay_bundle.cart.view.continue_shopping'|trans }} <i class="icon-arrow-right"></i></a>
        </div>
    {% endif %}

{% endblock %}

{% block prefooter %}
    {% include "@BlueDayTemplate/Modules/_product-related.html.twig" with { 'products' : related_products} %}
{% endblock prefooter %}
